<!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-spring4-4.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org">

<head th:substituteby="header :: copy"></head>

<body>

	<h1>Exceptions Demo 3</h1>
	<h2>Using Simple Mapping Exception Resolver</h2>
	<h3>Summary</h3>
	<ul>
		<li>Demo running with profiles: <i th:text="${profiles}">profiles</i></li>
		<li th:switch="${profiles}"><i th:text="${profiles}">SECOND-PROFILE-NAME</i>:
			Exceptions not handled elsewhere are <span th:case="'none'">handled
				by container. </span> <span th:case="'java-config'">passed to a <code>SimpleMappingExceptionResolver</code>
				created via Java Configuration - see <code>ExceptionConfiguration</code>.
		</span> <span th:case="'xml-config'">passed to a <code>SimpleMappingExceptionResolver</code>
				created via XML Configuration - see <code>mvc-configuration.xml</code>.
		</span> <span th:case="'demo-config'">passed to a switchable <code>SimpleMappingExceptionResolver</code>
				that may or may not choose to handle the exception - see <code>DemoExceptionConfiguration</code>.
				Switch state = <i th:text="${switchState}">on/off</i>. <span
				th:switch="${switchState}"> Resolver is <span th:case="'on'">enabled
						(<a href="/simpleMappingExceptionResolver/off">disable</a>)
				</span> <span th:case="'off'">disabled (<a
						href="/simpleMappingExceptionResolver/on">enable</a>)
				</span>
			</span>
		</span></li>
		<li>See <a
			href="https://spring.io/blog/2013/11/01/exception-handling-in-spring-mvc">
				Blog</a> for more details.
		</li>
		<li>Profile <a
			href="https://spring.io/blog/2013/11/01/exception-handling-in-spring-mvc#sample-application-and-spring-boot">discussion</a>
			in the Blog.
		</li>
	</ul>

	<h3>Details</h3>
	<p>
		The exceptions below show the use of a
		<code>SimpleMappingExceptionResolver</code>
		- the oldest way of handling exceptions in Spring dating back to V1
		and still commonly used. It is equivalent to using a ControllerAdvice
		- your choice.
	</p>

	<p>To fully understand this demo, review the output in the server
		(console) log as you click the links below.</p>

	<h3>Demo</h3>
	<ul class="openlist">

		<li>Throw <a href="/throw/databaseException">DatabaseException</a>
			- should generate a specific database-error page due to configuration
			of <code>SimpleMappingExceptionResolver</code>.
		</li>
		<li>Throw <a href="/throw/invalidCreditCard">InvalidCreditCardException</a>
			- should generate a specific credit-card error page due to
			configuration of <code>SimpleMappingExceptionResolver</code>.
		</li>
		<li>Throw <a href="/throw/customException">CustomException</a> -
			should generate a support oriented error page with hidden stack-trace
			hidden in the page source. Whether this is a good idea, is
			debatable!
		</li>
		<li>Throw <a href="/throw/unhandledException">UnhandledException</a>
			- should invoke the default (fall-back) error page defined by <code>SimpleMappingExceptionResolver</code>.
			<p th:if="${#strings.substringAfter(profiles,', ') != 'none'}">
				Note how uninformative it is. Subclass
				<code>SimpleMappingExceptionResolver</code>
				and override its
				<code>getModelAndView()</code>
				method to make additional context available in the model and in the
				error page (see
				<code>ExampleSimpleMappingExceptionResolver</code>
				).
			</p>
		</li>
		<li>A genuinely <a href="/unknown">Unknown page</a>. There is no
			handler for this URL, so the framework will generate a 404. (No
			exception handlers do this, this is the standard Spring MVC response
			to a URL it has no handler for).
		</li>
	</ul>

	<p>
		Demo 4: <a href="/simpleMappingExceptionResolver/off">No Handler</a>.
		For comparison, the same exceptions with no Simple Mapping Exception
		Resolver.
	</p>

	<div th:substituteby="footer :: copy"></div>

</body>
</html>
